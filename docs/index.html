<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="shortcut icon" href="/favicon.ico"/><link rel="preload" href="/_next/static/media/6d664cce900333ee-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/155cae559bbd1a77-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/media/4de1fea1a954a5b6-s.p.woff2" as="font" type="font/woff2" crossorigin="anonymous" data-next-font="size-adjust"/><link rel="preload" href="/_next/static/css/19c21632dbd9e5d8.css" as="style"/><link rel="stylesheet" href="/_next/static/css/19c21632dbd9e5d8.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-8fa1640cc84ba8fe.js" defer=""></script><script src="/_next/static/chunks/framework-ecc4130bc7a58a64.js" defer=""></script><script src="/_next/static/chunks/main-cb4281779d2d79ab.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0fce9b3f953b0a60.js" defer=""></script><script src="/_next/static/chunks/pages/index-b9ad72c33d14ff15.js" defer=""></script><script src="/_next/static/ljLCgpTv6OCHRmj3L6YGg/_buildManifest.js" defer=""></script><script src="/_next/static/ljLCgpTv6OCHRmj3L6YGg/_ssgManifest.js" defer=""></script></head><body class="p-4 m-4 w-full flex flex-col items-center"><section class="max-w-2xl w-full"><header><a href="/"><img src="/bob.jpg" class="float-right inline rounded-full h-8 w-8"/></a></header><section class="pt-28"><div id="__next"><main class="__className_814572"><section><ul class="list-none markdown-body leading-normal"><li class="my-12"><a href="/blog/2470440144/consistent-return-types-in-type-script" class="font-bold text-3xl border-b-0 mb-0 pb-0 no-underline text-black">Consistent Return Types in TypeScript<br/></a><sub class="text-def text-gray-600">Aug 16, 2024</sub><p class="py-0 my-2">Eliminate surprises within your functions</p></li><li class="my-12"><a href="/blog/1590330604/simplicity-is-key" class="font-bold text-3xl border-b-0 mb-0 pb-0 no-underline text-black">Simplicity is Key<br/></a><sub class="text-def text-gray-600">July 18, 2024</sub><p class="py-0 my-2">Fighting the urge to introduce complexity</p></li></ul></section></main></div></section></section><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"posts":[{"id":2470440144,"title":"Consistent Return Types in TypeScript","desc":"Eliminate surprises within your functions","html":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cp dir=\"auto\"\u003eImagine we have the following function:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"type User = {\n  id: string;\n  permissions: string[];\n};\n\nasync function getUserPermissions(userId: string) {\n  const user = await db.getUserById(userId);\n  if (!user) {\n    return { found: false };\n  }\n\n  return user.permissions;\n}\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-k\"\u003etype\u003c/span\u003e \u003cspan class=\"pl-smi\"\u003eUser\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-c1\"\u003eid\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-c1\"\u003epermissions\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e[\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e]\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"pl-k\"\u003easync\u003c/span\u003e \u003cspan class=\"pl-k\"\u003efunction\u003c/span\u003e \u003cspan class=\"pl-en\"\u003egetUserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003econst\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eawait\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003edb\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-en\"\u003egetUserById\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e!\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003efound\u003c/span\u003e: \u003cspan class=\"pl-c1\"\u003efalse\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003epermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe above function has the following implicit return type:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"Promise\u003cstring[] | { found: boolean }\u003e\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-smi\"\u003ePromise\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e[\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e]\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e|\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003efound\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003eboolean\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e\u0026gt;\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe issue is that the two return types have no properties in common, so if you try to do the following:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"const userPermissions = await getUserPermissions('123');\nif (!userPermissions.found) { // compiler error here\n  // Handle user not found\n} else if (userPermissions.includes('admin'))\n  // Allow them access\n}\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-k\"\u003econst\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euserPermissions\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eawait\u003c/span\u003e \u003cspan class=\"pl-en\"\u003egetUserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e'123'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e!\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003efound\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e \u003cspan class=\"pl-c\"\u003e// compiler error here\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// Handle user not found\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eelse\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-en\"\u003eincludes\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e'admin'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// Allow them access\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003ethe TypeScript compiler will yell at you with:\u003c/p\u003e\n\u003cdiv class=\"snippet-clipboard-content notranslate position-relative overflow-auto\" data-snippet-clipboard-copy-content=\"Property 'found' does not exist on type 'string[] | { found: boolean; }'\"\u003e\u003cpre class=\"notranslate\"\u003e\u003ccode class=\"notranslate\"\u003eProperty 'found' does not exist on type 'string[] | { found: boolean; }'\n\u003c/code\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 dir=\"auto\"\u003eThe Fix\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003eThe fix will depend on your business logic. In the above scenario, does your app need to distinguish between a user not being found and the user not having the necessary permissions? If not, you should do the following:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"async function getUserPermissions(userId: string) {\n  const user = await db.getUserById(userId);\n  if (!user) {\n    return [];\n  }\n\n  return user.permissions;\n}\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-k\"\u003easync\u003c/span\u003e \u003cspan class=\"pl-k\"\u003efunction\u003c/span\u003e \u003cspan class=\"pl-en\"\u003egetUserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003econst\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eawait\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003edb\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-en\"\u003egetUserById\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e!\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e[\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e]\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003epermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThis way your function always returns \u003ccode class=\"notranslate\"\u003estring[]\u003c/code\u003e. But if your app \u003cem\u003edoes\u003c/em\u003e need to distinguish between a user not being found and the user not having the necessary permissions, returning \u003ccode class=\"notranslate\"\u003enull\u003c/code\u003e is probably best:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"async function getUserPermissions(userId: string) {\n  const user = await db.getUserById(userId);\n  if (!user) {\n    return null;\n  }\n\n  return user.permissions;\n}\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-k\"\u003easync\u003c/span\u003e \u003cspan class=\"pl-k\"\u003efunction\u003c/span\u003e \u003cspan class=\"pl-en\"\u003egetUserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003econst\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eawait\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003edb\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-en\"\u003egetUserById\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e!\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003enull\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003epermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThe return type of \u003ccode class=\"notranslate\"\u003ePromise\u0026lt;string[] | null\u0026gt;\u003c/code\u003e is much easier to work with:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"const userPermissions = await getUserPermissions('123');\nif (!userPermissions) {\n  // Handle user not found\n} else if (userPermissions.includes('admin'))\n  // Allow them access\n}\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-k\"\u003econst\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euserPermissions\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eawait\u003c/span\u003e \u003cspan class=\"pl-en\"\u003egetUserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e'123'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e!\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// Handle user not found\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eelse\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-en\"\u003eincludes\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s\"\u003e'admin'\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\n  \u003cspan class=\"pl-c\"\u003e// Allow them access\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003ch2 dir=\"auto\"\u003eOne Step Further\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003eThe easiest way to make sure you know exactly what type your function is returning is to explicitly add the return type:\u003c/p\u003e\n\u003cdiv class=\"highlight highlight-source-ts notranslate position-relative overflow-auto\" dir=\"auto\" data-snippet-clipboard-copy-content=\"async function getUserPermissions(userId: string): Promise\u003cstring[]\u003e {\n  const user = await db.getUserById(userId);\n  if (!user) {\n    return [];\n  }\n\n  return user.permissions;\n}\"\u003e\u003cpre class=\"notranslate\"\u003e\u003cspan class=\"pl-k\"\u003easync\u003c/span\u003e \u003cspan class=\"pl-k\"\u003efunction\u003c/span\u003e \u003cspan class=\"pl-en\"\u003egetUserPermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e: \u003cspan class=\"pl-smi\"\u003ePromise\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e\u0026lt;\u003c/span\u003e\u003cspan class=\"pl-smi\"\u003estring\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e[\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e]\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e\u0026gt;\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003econst\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e \u003cspan class=\"pl-c1\"\u003e=\u003c/span\u003e \u003cspan class=\"pl-k\"\u003eawait\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003edb\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-en\"\u003egetUserById\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euserId\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-k\"\u003eif\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e(\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003e!\u003c/span\u003e\u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e)\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e{\u003c/span\u003e\n    \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-kos\"\u003e[\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e]\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n  \u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\n\n  \u003cspan class=\"pl-k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"pl-s1\"\u003euser\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e.\u003c/span\u003e\u003cspan class=\"pl-c1\"\u003epermissions\u003c/span\u003e\u003cspan class=\"pl-kos\"\u003e;\u003c/span\u003e\n\u003cspan class=\"pl-kos\"\u003e}\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\n\u003cp dir=\"auto\"\u003eThis is a good habit to get into because if you do end up returning something other than \u003ccode class=\"notranslate\"\u003estring[]\u003c/code\u003e in the above function, the TypeScript compiler will yell at you.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eIf you're using eslint, I would recommend enabling the \u003ca href=\"https://typescript-eslint.io/rules/explicit-function-return-type/\" rel=\"nofollow\" target=\"_blank\"\u003eexplicit-function-return-type\u003c/a\u003e rule, at least as a warning to start. This will ensure that your functions are returning exactly what you expect, with no surprises.\u003c/p\u003e\u003c/body\u003e\u003c/html\u003e","date":"Aug 16, 2024"},{"id":1590330604,"title":"Simplicity is Key","desc":"Fighting the urge to introduce complexity","html":"\u003chtml\u003e\u003chead\u003e\u003c/head\u003e\u003cbody\u003e\u003cp dir=\"auto\"\u003eOver the course of my career, I've seen a lot of engineers come and go. This is not uncommon in the tech industry, but it produces a very unfortunate situation for the people who stick around - \u003cstrong\u003ecomplexity increases, but expertise decreases\u003c/strong\u003e. Every tool, framework, library, and line of code that is introduced tends to outlast the person who introduced it.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThis can be (and hopefully is) mitigated with documentation, but documentation is not a substitute for deep knowledge about how something works. At its best, documentation will send you down the right path, but it's up to you to fill in the inevitable gaps.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eThe solution to this problem is obvious, although difficult to follow in practice - introduce less stuff. As engineers, we tend to always want to introduce \u003cem\u003emore\u003c/em\u003e stuff. REST got you down? Use GraphQL instead! Need to store arbitrary data in your database? NoSQL to the rescue! Need to send messages across applications? Time to onboard Kafka!\u003c/p\u003e\n\u003ch2 dir=\"auto\"\u003eWhat's wrong with Kafka and GraphQL?\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003eTo be clear, these are only examples. They all exist because they solve real-world problems, and they each have their place. But adding them (or any other tool) to your stack is not free. Each comes with onboarding costs, monetary costs, and maintenance issues. Eventually, someone at your company is going to need to know how these things work at a low level. You might have a Kafka wizard on your team right now, but will they be there in two years? Maybe, maybe not. But even if they're not, chances are Kafka \u003cem\u003ewill\u003c/em\u003e still be around. And that is true for the vast majority of the stack.\u003c/p\u003e\n\u003ch2 dir=\"auto\"\u003eAsk Yourself: Am I solving a real problem?\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003eHave you ever written code that works perfectly fine, but still leaves you with a nagging feeling? An example might be using an ORM that doesn't allow you to write the most performant SQL query, perhaps even forcing you to run multiple queries instead of one. There's nothing wrong with trying to find a solution to a problem like this, but you have to be careful. How far are you willing to go to solve this problem?  \u003cstrong\u003eIs this even a problem that needs to be solved?\u003c/strong\u003e\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eAre you doing this for your end users, or are you doing it to make yourself feel better? If you're not careful, you might find yourself burning the next few days test driving alternative ORMs, perhaps even going so far as trying to convince your team of the virtues of adopting a new one. But you need to be able to step back and see the big picture. If everyone on your team likes the current ORM and your less-than-perfect code is still good enough, is introducing a new ORM really the best decision? Is a new ORM a reasonable solution to your original problem?\u003c/p\u003e\n\u003ch2 dir=\"auto\"\u003eCan we solve the problem with tools we already use?\u003c/h2\u003e\n\u003cp dir=\"auto\"\u003eGiven the astronomical number of tools and libraries that exist today, there is very likely a tool out there built to solve your exact problem. And when you have a perfect match between problem and solution, it's hard not to instinctually reach for that solution.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eBut are you reaching for a new tool because you actually \u003cem\u003eneed\u003c/em\u003e it, or because you've heard great things about it and have been looking for a chance to play around with it? Questions that you should ask yourself include:\u003c/p\u003e\n\u003cul dir=\"auto\"\u003e\n\u003cli\u003eWhat is the surface area of this new tool - can it be used in a small corner of the code base to solve a specific problem, or does it span across the entire stack?\u003c/li\u003e\n\u003cli\u003eIs the team excited about using this new tool and eager to learn how about how it works, or is one person doing the lion's share of the work, shielding the team from the underlying complexities?\u003c/li\u003e\n\u003cli\u003eMost importantly, is there a good enough solution using your existing tools?\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp dir=\"auto\"\u003eThat last question is the most important one to ask. Before reaching for a new tool, you should spend time determining if the tools you're already using can solve this problem for you. It doesn't have to be a perfect solution, but a good enough solution with existing tools is almost always better than a perfect solution with a new tool.\u003c/p\u003e\n\u003cp dir=\"auto\"\u003eI have been guilty of every misstep outlined above, and I've seen others do the same. I've spent plenty of time imagining how some new tool was going to make a whole host of problems go away. What I didn't spend enough time doing was examining the downsides of introducing such a tool and asking myself and the team if it was really worth the cost. And as I've seen over the last five years, those costs add up.\u003c/p\u003e\u003c/body\u003e\u003c/html\u003e","date":"July 18, 2024"}]},"__N_SSG":true},"page":"/","query":{},"buildId":"ljLCgpTv6OCHRmj3L6YGg","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>